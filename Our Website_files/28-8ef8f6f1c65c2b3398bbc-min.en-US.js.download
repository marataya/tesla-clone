(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[28],{"./src/main/webapp/universal/packages/enums/BlockType.js":function(e,t){var n={NAVIGATION:1,HTML:2,LOGO:3,MAP:4,IMAGE:5,TWITTER:6,JOURNAL:7,GALLERY:8,FORM:9,GEO:10,INDEX:11,COLLECTION_LINK:12,LINK:13,TAGCLOUD:14,COMMENTS:16,FOLDER:17,MENU:18,SOCIAL_LINKS:19,SUMMARY:20,SPACER:21,EMBED:22,CODE:23,FOURSQUARE:24,INSTAGRAM:25,CALENDAR:26,POSTS_BY_AUTHOR:27,POSTS_BY_TAG:28,POSTS_BY_CATEGORY:29,POSTS_BY_MONTH:30,QUOTE:31,VIDEO:32,SEARCH:33,AUDIO:41,FIVEHUNDREDPIX:42,PRODUCT:43,MARKDOWN:44,FLICKR:45,AMAZON:46,HORIZONTAL_RULE:47,SOCIAL_ACCOUNT_LINKS:48,RSS:49,OPENTABLE:50,NEWSLETTER:51,DONATION:52,BUTTON:53,SOCIAL_ACCOUNT_LINKS_V2:54,SUMMARY_V2:55,SOUNDCLOUD:56,EMAIL_FOOTER:57,IN_BROWSER_MESSAGE_LINK:58,TOURDATES:59,ALBUM:60,ARCHIVE:61,CHART:62,ZOLA:63,ACUITY:65,OPENTABLE_V2:66,MEMBER_AREA:67};e.exports=n},"./src/main/webapp/universal/src/shared/actions/CampaignsConfigActions.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var i=a(n("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var o=a(n("./src/main/webapp/universal/src/shared/utils/CampaignsConfigApi.js"));var l=a(n("./src/main/webapp/universal/packages/enums/FormBackendConnectionState.js"));var u=function(){function e(){(0,r.default)(this,e);this.generateActions("loadFromCheckoutSettingsSuccess","loadFromSavedDataSuccess","changeSelectedListId","showValidationError","connectSuccess","connectFailure","saveSuccess","disconnect","reset")}(0,s.default)(e,[{key:"loadFromSavedData",value:function e(){var t=this;var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){if(n.connectionState!==l.default.CONNECTED)return t.reset();e({savedData:n,listId:n.listId});return o.default.getLists().then(t.loadFromSavedDataSuccess).catch(t.connectFailure)}}},{key:"connect",value:function e(){var t=this;return function(e){e();return o.default.getLists().then(t.connectSuccess).catch(t.connectFailure)}}}]);return e}();var c=i.default.createActions(u);t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/shared/actions/MailChimpConfigActions.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var i=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/slicedToArray.js"));var r=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var o=n("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var l=n("./src/main/webapp/universal/src/shared/utils/MailChimpConfigApi.js");var u=n("./src/main/webapp/universal/src/shared/utils/ExternalAuthentication.js");var c=n("./src/main/webapp/universal/packages/enums/ExternalServiceProviders.js");var d=function(){function e(){(0,r.default)(this,e);this.generateActions("loadSuccess","loadFromSavedDataSuccess","connectFailure","updateFailure","disconnectMailChimp","closeDidFailAlert","saveSuccess","reset","changeListId","changeUseSingleOptIn","mailChimpValidationError","closeNoListsAlert","savePreviousSettings","restorePreviousSettings")}(0,s.default)(e,[{key:"loadFromSavedData",value:function e(){var n=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){if(!a.socialConfig||!a.socialConfig.externalAuthenticationId)return n.loadFromSavedDataSuccess({savedData:a});var t=a.socialConfig.externalAuthenticationId;l.getLists(t).then(function(e){n.loadFromSavedDataSuccess({savedData:a,lists:e})},n.connectFailure).catch(n.connectFailure);e()}}},{key:"connectSuccess",value:function e(t,n,a){return{accountDetail:t,lists:n,socialConfig:a}}},{key:"connectMailChimp",value:function e(t){var s=this;return function(e){var t={serviceProvider:c.MAILCHIMP,params:{authenticationType:"website",startSubscription:true}};u.authenticate(t).then(function(e){if(e.socialConfig){var t=e.socialConfig.externalAuthenticationId;return Promise.all([l.getAccountDetail(t),l.getLists(t),e.socialConfig])}},s.updateFailure).then(function(e){var t=(0,i.default)(e,3),n=t[0],a=t[1],r=t[2];s.connectSuccess(n.data,a,r)},s.connectFailure).catch(s.connectFailure);e()}}}]);return e}();e.exports=o.createActions(d)},"./src/main/webapp/universal/src/shared/components/CampaignsConfig.jsx":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var o=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/inherits.js"));var s=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));var d=a(n("./common/temp/node_modules/prop-types/index.js"));var m=a(n("./common/temp/node_modules/react/index.js"));var p=a(n("./common/temp/node_modules/classnames/index.js"));var f=n("./common/temp/node_modules/@sqs/fields/lib/index.js");var h=a(n("./common/temp/node_modules/alt-utils/lib/connectToStores.js"));var v=a(n("./src/main/webapp/universal/src/shared/stores/CampaignsConfigStore.js"));var C=a(n("./src/main/webapp/universal/src/shared/actions/CampaignsConfigActions.js"));var b=n("./src/main/webapp/universal/src/shared/i18n/react.ts");var g=a(n("./src/main/webapp/universal/src/shared/components/CampaignsConfigDescription.jsx"));var _=a(n("./src/main/webapp/universal/src/shared/components/CampaignsConfig.less"));function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));n.push.apply(n,a)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),true).forEach(function(e){(0,c.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function w(a){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(a),t;if(r()){var n=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var M=document.location.hostname;var O="https://".concat(M,"/config/marketing/campaigns");var S=function(e){(0,l.default)(s,e);var a=w(s);function s(){var r;(0,i.default)(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r=a.call.apply(a,[this].concat(t));(0,c.default)((0,o.default)(r),"handleContainerClick",function(e){e.stopPropagation();var t=r.props,n=t.isConnected,a=t.lists;if(!n)return C.default.connect();0===a.length&&window.open(O)});(0,c.default)((0,o.default)(r),"handleDisconnectIconClick",function(){r.props.isConnected&&C.default.disconnect()});(0,c.default)((0,o.default)(r),"handleChange",function(e){C.default.changeSelectedListId(e)});(0,c.default)((0,o.default)(r),"renderMailingListOptions",function(){var e=r.props.lists;return e.map(function(e){var t=e.id,n=e.name;return m.default.createElement("option",{key:t,value:t},n)})});(0,c.default)((0,o.default)(r),"renderSelect",function(){var e=r.props,t=e.lists,n=e.selectedListId;var a=t.find(function(e){var t=e.id;return t===n})?n:"";return m.default.createElement("div",{className:_.default.labelAndSelect},m.default.createElement(f.Label,{className:_.default.label},m.default.createElement(b.T,{project:"src.shared"},"Mailing List")),m.default.createElement(f.Select,{wrapperClassName:_.default.select,value:a,onChange:r.handleChange,type:"light"},r.renderMailingListOptions()))});return r}(0,r.default)(s,[{key:"render",value:function e(){var t=this.props,n=t.isConnected,a=t.isConnecting,r=t.hasConnectionError,s=t.lists;var i=n&&s.length>0;var o=(0,p.default)(_.default.container,(0,c.default)({},_.default.connected,i));return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:o,onClick:this.handleContainerClick},m.default.createElement("div",{className:_.default.titleAndButton},m.default.createElement("div",{className:_.default.title},m.default.createElement(b.T,{project:"src.shared"},"Squarespace Email Campaigns")),m.default.createElement("div",{className:_.default.button,onClick:this.handleDisconnectIconClick},m.default.createElement("div",{className:_.default.icon}))),m.default.createElement("div",{className:_.default.descriptionContainer},m.default.createElement(g.default,{isConnected:n,isConnecting:a,hasConnectionError:r,lists:s}),i&&this.renderSelect())),n&&m.default.createElement("p",{className:(0,p.default)(_.default.description,_.default.postDescription)},m.default.createElement(b.T,{campaignsDashboard:m.default.createElement("a",{href:O,target:"_blank"},m.default.createElement(b.T,{project:"src.shared"},"Email Campaigns dashboard")),project:"src.shared"},"To manage this mailing list and customize the confirmation email, go to the {campaignsDashboard}.")))}}]);return s}(m.default.Component);(0,c.default)(S,"propTypes",{initialData:d.default.object,isConnecting:d.default.bool.isRequired,isConnected:d.default.bool.isRequired,isDirty:d.default.bool,lists:d.default.array.isRequired,selectedListId:d.default.string,wasRemoved:d.default.bool,hasConnectionError:d.default.bool});var E=(0,h.default)({getStores:function e(){return[v.default]},componentDidConnect:function e(t){C.default.loadFromSavedData.defer(t.initialData)},getPropsFromStores:function e(){var t=v.default.getState();return j({},t)}},S);t.default=E;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/CampaignsConfig.less":function(e,t,n){e.exports={container:"CampaignsConfig-container-3kMxH",icon:"CampaignsConfig-icon-3Sk3L",titleAndButton:"CampaignsConfig-titleAndButton-3x92a",title:"CampaignsConfig-title-e4b3E",button:"CampaignsConfig-button-3-Rl7",descriptionContainer:"CampaignsConfig-descriptionContainer-1LRvX",connected:"CampaignsConfig-connected-1Szn1",labelAndSelect:"CampaignsConfig-labelAndSelect-rsiHJ",label:"CampaignsConfig-label-2fERg",select:"CampaignsConfig-select-2LeGN",description:"CampaignsConfig-description-c4_7f",innerDescription:"CampaignsConfig-innerDescription-22rGq",postDescription:"CampaignsConfig-postDescription-hKU_3"}},"./src/main/webapp/universal/src/shared/components/CampaignsConfigDescription.jsx":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(n("./common/temp/node_modules/prop-types/index.js"));var m=a(n("./common/temp/node_modules/react/index.js"));var p=a(n("./common/temp/node_modules/classnames/index.js"));var s=n("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=a(n("./src/main/webapp/universal/src/shared/components/CampaignsConfig.less"));var c={CONNECTING:(0,s.t)("Connecting..."),CONNECTION_ERROR:(0,s.t)("There was an issue retrieving your Squarespace Email Campaigns lists. Please try again later."),CONNECT:(0,s.t)("Click to connect"),NO_LISTS:(0,s.t)("Click here to create a mailing list. Then come back to this page to link it with this block.")};var h=function e(t){var n=t.isConnecting,a=void 0!==n&&n,r=t.hasConnectionError,s=void 0!==r&&r,i=t.isConnected,o=void 0!==i&&i,l=t.isMissingLists,u=void 0!==l&&l;if(a)return c.CONNECTING;if(s)return c.CONNECTION_ERROR;if(!o)return c.CONNECT;if(u)return c.NO_LISTS;return""};var i=function e(t){var n=t.isConnecting,a=void 0!==n&&n,r=t.hasConnectionError,s=void 0!==r&&r,i=t.isConnected,o=void 0!==i&&i,l=t.lists,u=void 0===l?[]:l;var c=o&&0===u.length;var d=h({isConnecting:a,hasConnectionError:s,isConnected:o,isMissingLists:c});return d&&m.default.createElement("div",{className:(0,p.default)(f.default.description,f.default.innerDescription)},m.default.createElement("span",null,d))};i.propTypes={isConnecting:r.default.bool,hasConnectionError:r.default.bool,isConnected:r.default.bool,lists:r.default.array};var o=i;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Badge/index.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(n("./common/temp/node_modules/@sqs/core-components/lib/web/FeatureGateBadge.js"));var s=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/withLabelsAndAnalytics.js"));var i=(0,s.default)(r.default);t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/ConfirmationModal.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/extends.js"));var u=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var r=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var i=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/inherits.js"));var o=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));var m=a(n("./common/temp/node_modules/prop-types/index.js"));var p=a(n("./common/temp/node_modules/react/index.js"));var f=a(n("./src/main/webapp/universal/src/shared/components/Modal/index.jsx"));var h=a(n("./src/main/webapp/universal/src/shared/components/Modal/Button.jsx"));var v=a(n("./common/temp/node_modules/@sqs/core-components/lib/web/FeatureGateBadge.js"));var C=n("./src/main/webapp/universal/src/shared/i18n/react.ts");var b=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/ConfirmationModal.less"));function g(a){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(a),t;if(r()){var n=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var _=function(e){(0,i.default)(n,e);var t=g(n);function n(){(0,r.default)(this,n);return t.apply(this,arguments)}(0,s.default)(n,[{key:"render",value:function e(){var t=this.props,n=t.positionToMouse,a=t.premiumFeatureLabel,r=t.confirmTitle,s=t.confirmDescription,i=(0,u.default)(t,["positionToMouse","premiumFeatureLabel","confirmTitle","confirmDescription"]);var o=this.props.anchor;o=o||(n?"mousepointer":"window");return p.default.createElement(f.default,(0,l.default)({},i,{anchor:o,theme:"damask"}),p.default.createElement(f.default.Body,{className:b.default.confirmModal},p.default.createElement(v.default,{premiumFeatureLabel:a}),r&&p.default.createElement("p",{className:b.default.confirmTitle},r),p.default.createElement("p",{className:b.default.confirmDescription},s),p.default.createElement(h.default,{onClick:this.props.onRequestClose},p.default.createElement(C.T,{project:"src.shared"},"Okay"))))}}]);return n}(p.default.Component);(0,d.default)(_,"propTypes",{anchor:m.default.oneOf(["window","mousepointer"]),confirmDescription:m.default.node.isRequired,confirmTitle:m.default.string.isRequired,isOpen:m.default.bool.isRequired,onRequestClose:m.default.func.isRequired,positionToMouse:m.default.bool,premiumFeatureLabel:m.default.string.isRequired});(0,d.default)(_,"defaultProps",{anchor:"window",onDismiss:function e(){},onUpgrade:function e(){},positionToMouse:true,theme:"damask"});var y=_;t.default=y;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/ConfirmationModal.less":function(e,t,n){e.exports={confirmModal:"ConfirmationModal-confirmModal-7B-az",confirmTitle:"ConfirmationModal-confirmTitle-3P1we"}},"./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/index.jsx":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/ConfirmationModal.js"));var s=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/withLabels.js"));var i=(0,s.default)(r.default);t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/withLabels.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/extends.js"));var o=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var l=a(n("./common/temp/node_modules/react/index.js"));var u=a(n("./src/main/webapp/universal/src/apps/App/shared/constants/FeatureGateDefaultCopy.js"));var r=function e(s){return function(e){var t=e.isTrial,n=e.confirmDescription,a=e.confirmTitle,r=(0,o.default)(e,["isTrial","confirmDescription","confirmTitle"]);n=n||(t?u.default.trialConfirmDescription:u.default.confirmDescription);a=a||(t?u.default.trialConfirmTitle:u.default.confirmTitle);return l.default.createElement(s,(0,i.default)({premiumFeatureLabel:u.default.premiumFeatureLabel,confirmDescription:n,confirmTitle:a},r))}};t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Logo/index.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(n("./common/temp/node_modules/@sqs/core-components/lib/web/FeatureGateLogo.js"));var s=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/withLabelsAndAnalytics.js"));var i=(0,s.default)(r.default);t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Menu/index.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(n("./common/temp/node_modules/@sqs/core-components/lib/web/FeatureGateMenu.js"));var s=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/withLabelsAndAnalytics.js"));var i=(0,s.default)(r.default);t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Message/FeatureGateMessage.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var r=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var o=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/inherits.js"));var l=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));var d=a(n("./common/temp/node_modules/react/index.js"));var m=r(n("./src/main/webapp/universal/src/shared/components/FeatureGate/Message/FeatureGateMessage.less"));var p=r(n("./common/temp/node_modules/prop-types/index.js"));var f=r(n("./common/temp/node_modules/classnames/index.js"));var h=n("./common/temp/node_modules/@sqs/fields/lib/index.js");var v=n("./src/main/webapp/universal/src/shared/i18n/index.ts");function C(a){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(a),t;if(r()){var n=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,l.default)(this,t)}}var b=function(e){(0,o.default)(n,e);var t=C(n);function n(){(0,s.default)(this,n);return t.apply(this,arguments)}(0,i.default)(n,[{key:"render",value:function e(){var t=this.props,n=t.title,a=t.subTitle,r=t.className,s=t.onRequestUpgrade,i=t.upgradeLabel;return d.default.createElement("div",{className:(0,f.default)(m.default.message,r)},d.default.createElement("div",{className:m.default.title},n),d.default.createElement("div",{className:m.default.subTitle},a),d.default.createElement(h.BaseButton,{onClick:s,className:m.default.upgradeButton},i))}}]);return n}(d.Component);(0,c.default)(b,"propTypes",{title:p.default.string.isRequired,subTitle:p.default.string.isRequired,upgradeLabel:p.default.string.isRequired,onRequestUpgrade:p.default.func});(0,c.default)(b,"defaultProps",{upgradeLabel:(0,v.t)("Upgrade Now")});var g=b;t.default=g;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Message/FeatureGateMessage.less":function(e,t,n){e.exports={message:"FeatureGateMessage-message-1HPp9",title:"FeatureGateMessage-title-35KWW",subTitle:"FeatureGateMessage-subTitle-3dVRT",upgradeButton:"FeatureGateMessage-upgradeButton-YWyNS"}},"./src/main/webapp/universal/src/shared/components/FeatureGate/Message/index.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/Message/FeatureGateMessage.js"));var s=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/withLabelsAndAnalytics.js"));var i=(0,s.default)(r.default);t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModalStandalone/UpgradeModalStandalone.jsx":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var r=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/extends.js"));var o=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var l=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var u=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/inherits.js"));var c=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var m=r(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));var p=r(n("./common/temp/node_modules/prop-types/index.js"));var f=a(n("./common/temp/node_modules/react/index.js"));var h=n("./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModal/index.jsx");var v=r(n("./src/main/webapp/universal/src/apps/App/shared/constants/UpsellDestination.js"));var C=r(n("./src/main/webapp/universal/src/apps/App/shared/constants/UpsellUrls.js"));var b=r(n("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts"));var g=r(n("./src/main/webapp/universal/src/shared/router/withRouter.tsx"));var _=r(n("./src/main/webapp/universal/src/shared/router/propType.ts"));function y(a){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(a),t;if(r()){var n=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,c.default)(this,t)}}var j=function(e){(0,u.default)(n,e);var t=y(n);function n(e){var i;(0,o.default)(this,n);i=t.call(this,e);(0,m.default)((0,l.default)(i),"handleUpgradeModalUpgradeClick",function(e){var t=i.props,n=t.isTrial,a=t.router,r=t.eventTracker;r();e.stopPropagation();i.handleUpgradeModalDismiss(e);i.handleTrackingEvents("upgrade_click");var s=n?C.default[v.default.TRIAL_UPGRADE_PLAN]:C.default[v.default.UPGRADE_PLAN];a?a.push({pathname:s}):window.location.assign("/config".concat(s))});(0,m.default)((0,l.default)(i),"handleUpgradeModalDismiss",function(e){e.stopPropagation();i.setState({isUpgradeModalOpen:false})});(0,m.default)((0,l.default)(i),"handleTrackingEvents",function(e){var t=i.props,n=t.analyticsId,a=t.isTrial;(0,b.default)("feature_gate",{action:e,identifier:n,isTrial:a})});i.state=n.defaultState;i.handleTrackingEvents("display");return i}(0,i.default)(n,[{key:"render",value:function e(){var t=this.state.isUpgradeModalOpen;var n=this.props.isTrial;if(t)return f.default.createElement(h.UpgradeModalWithLabels,(0,s.default)({isOpen:t,key:"upgrade-modal",isTrial:n,onRequestClose:this.handleUpgradeModalDismiss,onRequestUpgrade:this.handleUpgradeModalUpgradeClick},this.props));return null}}]);return n}(f.Component);(0,m.default)(j,"propTypes",{analyticsId:p.default.string.isRequired,isTrial:p.default.bool.isRequired,router:_.default.isRequired,anchor:p.default.oneOf(["window","mousepointer"]),eventTracker:p.default.func});(0,m.default)(j,"defaultProps",{anchor:"mousepointer"});(0,m.default)(j,"defaultState",{isUpgradeModalOpen:true});var w=(0,g.default)(j);t.default=w;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModalStandalone/index.jsx":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"default",{enumerable:true,get:function e(){return r.default}});var r=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModalStandalone/UpgradeModalStandalone.jsx"));e.exports=t.default},"./src/main/webapp/universal/src/shared/components/MailChimpConfig.jsx":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var l=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var o=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/inherits.js"));var u=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));function m(a){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(a),t;if(r()){var n=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,u.default)(this,t)}}var r=n("./common/temp/node_modules/prop-types/index.js");var p=n("./common/temp/node_modules/react/index.js");var f=n("./common/temp/node_modules/@sqs/fields/lib/index.js"),h=f.Check,v=f.Select;var C=n("./src/main/webapp/universal/src/shared/actions/MailChimpConfigActions.js");var b=n("./src/main/webapp/universal/src/shared/components/Alert.jsx");var g=n("./common/temp/node_modules/classnames/index.js");var _=n("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var y=n("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var j=n("./src/main/webapp/universal/packages/enums/StatusConstants.js");var w=n("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var M=n("./src/main/webapp/universal/packages/enums/Features.js");var O=n("./src/main/webapp/universal/src/shared/i18n/index.ts"),S=O.t;var E=n("./src/main/webapp/universal/src/shared/i18n/react.ts"),T=E.T;var D=n("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");var k=n("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/index.jsx");var R=n("./src/main/webapp/universal/src/shared/components/MailChimpConfig.less");var A=function(e){(0,o.default)(r,e);var a=m(r);function r(){var o;(0,s.default)(this,r);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o=a.call.apply(a,[this].concat(t));(0,d.default)((0,l.default)(o),"state",{showMailchimpWarning:false});(0,d.default)((0,l.default)(o),"handleContainerClick",function(){var e=o.props,t=e.isMailChimpConnected,n=e.shouldShowMailchimpWarning,a=e.showConnectionFailedAlert;if(!t)if(n){D.trackInternal("upsell_confirmation_mailchimp_show");o.setState({showMailchimpWarning:true})}else a||C.connectMailChimp()});(0,d.default)((0,l.default)(o),"getDescription",function(){var e=o.props,t=e.isMailChimpConnected,n=e.isConnecting,a=e.mailChimpError,r=e.mailChimpUsername;if(a)return S("Error connecting to MailChimp");if(t)return S("As {username}",{username:r});if(n)return S("Connecting…");return S("Click to connect")});(0,d.default)((0,l.default)(o),"handleIconClick",function(){var e=o.props.isMailChimpConnected;e&&C.disconnectMailChimp()});(0,d.default)((0,l.default)(o),"handleCloseMailchimpWarning",function(){o.setState({showMailchimpWarning:false});C.connectMailChimp()});(0,d.default)((0,l.default)(o),"renderMailingListOptions",function(){var e=o.props.mailChimpLists;return e.map(function(e){var t=e.title,n=e.value;return p.createElement("option",{key:n,value:n},t)})});(0,d.default)((0,l.default)(o),"renderOAuthFailedAlert",function(){var e=o.props.showConnectionFailedAlert;return p.createElement(b,{key:"oauth-failed-alert",isOpen:e,onDismiss:C.closeDidFailAlert,title:S("External Authentication Error"),dismissText:S("Okay"),anchor:"window"},p.createElement(T,{project:"src.shared"},"Unable to connect to external service."))});(0,d.default)((0,l.default)(o),"renderNoListsAlert",function(){var e=o.props.showNoMailChimpListsAlert;return p.createElement(b,{key:"no-lists-alert",isOpen:e,onDismiss:C.closeNoListsAlert,title:S("No MailChimp Lists Created"),dismissText:S("Okay"),anchor:"window"},p.createElement(T,{project:"src.shared"},"Connecting to MailChimp requires an existing MailChimp mailing list. Please create one to continue."))});(0,d.default)((0,l.default)(o),"renderIcon",function(){return p.createElement("div",{className:R.button,onClick:o.handleIconClick},p.createElement("div",{"data-test":"mailchimp-config-icon",className:R.icon}))});(0,d.default)((0,l.default)(o),"renderSelect",function(){var e=o.props,t=e.mailChimpListId,n=e.showMailingListRequiredError;var a=[p.createElement("option",{key:"placeholder-option",value:""},"Select Lists")];var r=o.renderMailingListOptions();var s=n?S("Select a list"):null;var i=r.some(function(e){return e.props.value===t})?t:"";return p.createElement(v,{wrapperClassName:R.select,value:i,onChange:function e(t){C.changeListId(t)},type:"light",errorMessage:s},a.concat(r))});(0,d.default)((0,l.default)(o),"renderDoubleOptInConfig",function(){var e=o.props.mailChimpUseSingleOptIn;var t=!e;var n=g(R.check,(0,d.default)({},R.active,t));return p.createElement("div",{className:R.sectionContainer},p.createElement(h,{className:n,wrapperClassName:R.checkWrapper,title:S("Require double opt-in after subscribing"),value:t,onChange:function e(t){C.changeUseSingleOptIn(!t)}}))});(0,d.default)((0,l.default)(o),"renderMailchimpWarning",function(){var e=o.state.showMailchimpWarning;return p.createElement(k,{key:"mailchimp-warning",isOpen:e,isTrial:y.isTrial(),onRequestClose:o.handleCloseMailchimpWarning})});return o}(0,i.default)(r,[{key:"render",value:function e(){var t;var n=this.props.isMailChimpConnected;var a=g(R.container,(t={},(0,d.default)(t,R.connected,n),(0,d.default)(t,R.disconnected,!n),t));var r=n?"mailchimp-config-connected":void 0;return[p.createElement("div",{key:"container",className:a,onClick:this.handleContainerClick,"data-test":r},p.createElement("div",{className:R.sectionContainer},p.createElement("div",{className:R.descriptionContainer},p.createElement("div",{className:R.title},"MailChimp"),p.createElement("div",{className:R.description},this.getDescription())),n&&this.renderSelect(),this.renderIcon()),n&&this.renderDoubleOptInConfig()),this.renderNoListsAlert(),this.renderOAuthFailedAlert(),this.renderMailchimpWarning()]}}]);return r}(p.Component);(0,d.default)(A,"propTypes",{isConnecting:r.bool.isRequired,isMailChimpConnected:r.bool.isRequired,mailChimpError:r.bool.isRequired,mailChimpListId:r.string,mailChimpLists:r.arrayOf(r.object),mailChimpUsername:r.string,mailChimpUseSingleOptIn:r.bool,showConnectionFailedAlert:r.bool.isRequired,showMailingListRequiredError:r.bool.isRequired,showNoMailChimpListsAlert:r.bool.isRequired,shouldShowMailchimpWarning:r.bool.isRequired});e.exports=_({getStores:function e(){return[y,w]},getPropsFromStores:function e(){var t=y.getState(),n=t.siteStatus;var a=!w.isFeatureInAllPlans(M.MAILCHIMP_INTEGRATION)&&n===j.TRIAL;return{shouldShowMailchimpWarning:a}}},A)},"./src/main/webapp/universal/src/shared/components/MailChimpConfig.less":function(e,t,n){e.exports={container:"MailChimpConfig-container-3D9hd",disconnected:"MailChimpConfig-disconnected-CcrOo",icon:"MailChimpConfig-icon-3XdJO",descriptionContainer:"MailChimpConfig-descriptionContainer-27lSQ",sectionContainer:"MailChimpConfig-sectionContainer-1_A9Q",connected:"MailChimpConfig-connected-1exwf",button:"MailChimpConfig-button-1PBfu",select:"MailChimpConfig-select-HTrDG",check:"MailChimpConfig-check-2Ybki icons-checkDarkSmallAfter-2fuHw",active:"MailChimpConfig-active-3BGcc",checkWrapper:"MailChimpConfig-checkWrapper-2_YoR",title:"MailChimpConfig-title-16z0o",description:"MailChimpConfig-description-2oGO3"}},"./src/main/webapp/universal/src/shared/constants/BlockTypeToFeature.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=a(n("./src/main/webapp/universal/packages/enums/Features.js"));var i=a(n("./src/main/webapp/universal/packages/enums/BlockType.js"));var o;var l=(o={},(0,r.default)(o,i.default.AMAZON,s.default.BLOCK_AMAZON),(0,r.default)(o,i.default.DONATION,s.default.BLOCK_DONATION),(0,r.default)(o,i.default.MENU,s.default.BLOCK_MENU),(0,r.default)(o,i.default.OPENTABLE,s.default.BLOCK_OPENTABLE),(0,r.default)(o,i.default.OPENTABLE_V2,s.default.BLOCK_OPENTABLE),o);t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/shared/stores/CampaignsConfigStore.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/slicedToArray.js"));var r=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var o=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));var l=a(n("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var u=a(n("./src/main/webapp/universal/packages/enums/FormBackendConnectionState.js"));var c=a(n("./src/main/webapp/universal/packages/enums/FormBackendConnectionType.js"));var d=a(n("./src/main/webapp/universal/src/shared/actions/CampaignsConfigActions.js"));function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),true).forEach(function(e){(0,o.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var f={initialData:{connectionState:u.default.DISCONNECTED,listId:null},isConnecting:false,isConnected:false,isDirty:false,lists:[],selectedListId:null,wasRemoved:false,hasConnectionError:false};var h=function(){function t(){var e=this;(0,r.default)(this,t);(0,o.default)(this,"isReady",function(){return e.state.hasConnectionError||e.state.isConnected});(0,o.default)(this,"isConnected",function(){return e.state.isConnected&&e.state.selectedListId});(0,o.default)(this,"getConnectionData",function(){return e.isConnected()?{backendType:c.default.CAMPAIGNS,connectionState:u.default.CONNECTED,listId:e.state.selectedListId}:{backendType:c.default.CAMPAIGNS,connectionState:u.default.DISCONNECTED,listId:null}});this.state=p({},f);this.bindActions(d.default);this.exportPublicMethods({getConnectionData:this.getConnectionData,isConnected:this.isConnected,isReady:this.isReady})}(0,s.default)(t,[{key:"onLoadFromSavedData",value:function e(t){var n=t.savedData,a=t.listId;this.setState({initialData:n,selectedListId:a})}},{key:"onLoadFromSavedDataSuccess",value:function e(t){var n=t.results;var a=null!==this.state.initialData.listId;this.setState({isConnected:true,isDirty:!a,lists:n})}},{key:"onLoadFromCheckoutSettingsSuccess",value:function e(t){var n=t.storeMailingListSettings;var a=n.isCampaignsConnected,r=n.campaignsListId,s=n.campaignsMailingLists;this.setState({isConnected:a,isDirty:false,selectedListId:r,lists:s,initialData:{connectionState:a?u.default.CONNECTED:u.default.DISCONNECTED,listId:r}})}},{key:"onChangeSelectedListId",value:function e(t){t&&this.setState({isDirty:true,selectedListId:t})}},{key:"onConnect",value:function e(){this.setState({isConnecting:true,hasConnectionError:false})}},{key:"onConnectSuccess",value:function e(t){var n=t.results;var a={isConnecting:false,isConnected:true,lists:n,wasRemoved:false};if(!this.state.selectedListId){var r=(0,i.default)(n,1),s=r[0].id;a.selectedListId=s;a.isDirty=true}this.setState(a)}},{key:"onConnectFailure",value:function e(){this.setState({isConnecting:false,hasConnectionError:true})}},{key:"onDisconnect",value:function e(){this.setState(p({},f,{initialData:this.state.initialData,isDirty:true,wasRemoved:true}))}},{key:"onSaveSuccess",value:function e(){this.setState({isDirty:false,initialData:this.getConnectionData()})}},{key:"onReset",value:function e(){this.setState(p({},f))}}]);return t}();var v=l.default.createStore(h,"CampaignsConfigStore");t.default=v;e.exports=t.default},"./src/main/webapp/universal/src/shared/stores/MailChimpConfigStore.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var i=n("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=n("./common/temp/node_modules/immutable/dist/immutable.js");var l=n("./src/main/webapp/universal/src/shared/actions/MailChimpConfigActions.js");var u=n("./src/main/webapp/universal/src/shared/utils/MailChimpConfigRecord.js");var c=n("./src/main/webapp/universal/packages/enums/FormBackendConnectionState.js");var d=function(){function t(){(0,r.default)(this,t);var e=new u;this.state={initialMailChimpConfig:e,mailChimpConfig:e,isDirty:false,showConnectionFailedAlert:false,isConnecting:false,showMailingListRequiredError:false,showNoMailChimpListsAlert:false,previousMailChimpConfig:null,wasRemoved:false};this.bindActions(l)}(0,s.default)(t,[{key:"onSavePreviousSettings",value:function e(){var t=this.state.mailChimpConfig;this.setState({previousMailChimpConfig:t,mailChimpConfig:new u})}},{key:"onRestorePreviousSettings",value:function e(){var t=this.state.previousMailChimpConfig;t&&this.setState({mailChimpConfig:t,previousMailChimpConfig:null})}},{key:"onMailChimpValidationError",value:function e(){this.setState({showMailingListRequiredError:true})}},{key:"onConnectMailChimp",value:function e(){this.setState({wasRemoved:false,isConnecting:true})}},{key:"onLoadSuccess",value:function e(t){var n=t.storeMailingListSettings;var a=u.buildFromJson(n);var r=a.isMailChimpConnected;var s=a.mailChimpConnectionInfo.mailChimpLists;var i=r&&(!s||0===s.length);this.setState({isDirty:false,initialMailChimpConfig:a,mailChimpConfig:a,showNoMailChimpListsAlert:i})}},{key:"onLoadFromSavedDataSuccess",value:function e(t){var n=t.savedData,a=t.lists,r=void 0===a?[]:a;var s=!!(n.connectionState===c.CONNECTED&&0===r.length);var i=u.buildFromJson({isMailChimpConnected:n.connectionState===c.CONNECTED,mailChimpListId:n.list,mailChimpUsername:n.username,mailChimpUseSingleOptIn:n.useSingleOptIn,mailChimpConnectionInfo:{mailChimpLists:r},mailChimpOAuthConfig:n.socialConfig});this.setState({isDirty:false,isConnecting:false,mailChimpConfig:i,initialMailChimpConfig:i,showNoMailChimpListsAlert:s})}},{key:"onConnectFailure",value:function e(){var t=this.state.mailChimpConfig;var n=t.mailChimpConnectionInfo;var a=n.merge({mailChimpError:true});var r=t.merge({mailChimpConnectionInfo:a});this.setState({initialMailChimpConfig:r,mailChimpConfig:r})}},{key:"onChangeListId",value:function e(t){var n=this.state,a=n.initialMailChimpConfig,r=n.mailChimpConfig;var s=r.merge({mailChimpListId:t});this.setState({isDirty:!o.is(s,a),mailChimpConfig:s,showMailingListRequiredError:false})}},{key:"onChangeUseSingleOptIn",value:function e(t){var n=this.state,a=n.initialMailChimpConfig,r=n.mailChimpConfig;var s=r.merge({mailChimpUseSingleOptIn:t});this.setState({isDirty:!o.is(s,a),mailChimpConfig:s})}},{key:"onConnectSuccess",value:function e(t){var n=this.state.mailChimpConfig.mailChimpListId;t.accountDetail.list&&(n=t.accountDetail.list);var a=t.lists;var r=0===a.length;var s=u.buildFromJson({isMailChimpConnected:true,mailChimpListId:n,mailChimpUsername:t.accountDetail.username,mailChimpUseSingleOptIn:true,mailChimpConnectionInfo:{mailChimpLists:a},mailChimpOAuthConfig:t.socialConfig});this.setState({isDirty:!(t.accountDetail&&t.accountDetail.connected),isConnecting:false,mailChimpConfig:s,showNoMailChimpListsAlert:r})}},{key:"onDisconnectMailChimp",value:function e(){var t=this.state.mailChimpConfig.mailChimpListId;var n=u.buildFromJson({mailChimpListId:t});this.setState({wasRemoved:true,isDirty:true,mailChimpConfig:n})}},{key:"onSaveSuccess",value:function e(){this.setState({isDirty:false,showMailingListRequiredError:false,initialMailChimpConfig:this.state.mailChimpConfig})}},{key:"onUpdateFailure",value:function e(){this.setState({showConnectionFailedAlert:true,isConnecting:false})}},{key:"onCloseDidFailAlert",value:function e(){this.setState({showConnectionFailedAlert:false})}},{key:"onCloseNoListsAlert",value:function e(){this.setState({showNoMailChimpListsAlert:false})}},{key:"onReset",value:function e(){var t=this.state.initialMailChimpConfig;this.setState({isDirty:false,showMailingListRequiredError:false,mailChimpConfig:t})}}]);return t}();e.exports=i.createStore(d,"MailChimpConfigStore")},"./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.isBlockTypeFeatureGated=O;t.getFeatureGatedBlockTypes=S;t.featureGateBlockItems=E;t.trackInternal=T;t.willAddFeatureGate=D;t.renderLogo=R;t.renderMenu=A;t.renderBadgeWithProps=L;t.renderBadge=I;t.renderBlockWrapper=N;t.renderPanelNode=P;t.renderPanel=F;t.renderMessage=x;t.renderUpgradeModal=G;t.showUpsellConfirmation=q;t.transformUpsellCopy=U;var r=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=a(n("./common/temp/node_modules/react/index.js"));var u=a(n("./common/temp/node_modules/react-dom/index.js"));var s=a(n("./common/temp/node_modules/lodash/invert.js"));var i=a(n("./common/temp/node_modules/lodash/isUndefined.js"));var l=a(n("./src/main/webapp/universal/packages/enums/BlockType.js"));var c=a(n("./src/main/webapp/universal/src/apps/App/shared/constants/UpsellDestination.js"));var d=a(n("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js"));var m=a(n("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js"));var p=a(n("./src/main/webapp/universal/src/shared/constants/BlockTypeToFeature.js"));var f=a(n("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts"));var h=n("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/Logo/index.js"));var C=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/Menu/index.js"));var b=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/Panel/index.js"));var g=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/Badge/index.js"));var _=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/Message/index.js"));var y=a(n("./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModalStandalone/index.jsx"));function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));n.push.apply(n,a)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),true).forEach(function(e){(0,r.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var M=(0,s.default)(l.default);function O(e){var t=p.default[e];if((0,i.default)(t))return false;return d.default.isFeatureGated(t)}function S(){return Object.keys(p.default).filter(function(e){return O(e)}).map(function(e){return parseInt(e,10)})}function E(e){var t=S();var n=[];e.forEach(function(e){e.items=e.items.filter(function(e){if(t.includes(e)){n.push(e);return false}return true})});n.length>0&&e.push({label:(0,h.t)("Premium"),items:n,premium:true,meta:{isTrial:m.default.isTrial()}});return e}function T(e,t){(0,f.default)(e,w({},t,{isTrial:m.default.isTrial()}))}function D(e){var t=e.blockType,n=e.featureGateClass,a=void 0===n?"":n,r=e.node;if(t&&!O(t))return false;if(a&&r.querySelector("".concat(a)))return false;return true}function k(e){var t=e.blockType,n=e.component,a=e.featureGateClass,r=void 0===a?"":a,s=e.node;var i=s.ownerDocument.createElement("div");if(r){var o=r.split(" ");for(var l=0;l<o.length;++l)i.classList.add(o[l].replace(".",""))}s.insertBefore(i,s.firstChild);u.default.render(n,i)}function R(e){var t=e.analyticsId,n=e.blockType,a=e.node,r=e.featureGateClass,s=e.upsellCopyOverrides;k({blockType:n,node:a,featureGateClass:r||".sqs-widget .sqs-featuregate",component:o.default.createElement(v.default,w({analyticsId:t||"".concat(M[n].toLowerCase(),"-block"),isTrial:m.default.isTrial()},s))})}function A(e){var t=e.analyticsId,n=e.blockType,a=e.escapePadding,r=e.node,s=e.isEditing;var i=".sqs-featuregate-menu";if(!D({blockType:n,featureGateClass:i,node:r}))return false;k({blockType:n,node:r,featureGateClass:i,component:o.default.createElement(C.default,{analyticsId:t||"".concat(M[n].toLowerCase(),"-block"),isTrial:m.default.isTrial(),escapePadding:a,isEditing:s})});return true}function L(e){var t=e.node,n=e.upsellCopyOverrides,a=void 0===n?{}:n,r=e.componentProps,s=void 0===r?{}:r;k({node:t,featureGateClass:".sqs-featuregate-badge",component:o.default.createElement(g.default,w({isTrial:m.default.isTrial()},a,{},s))})}function I(e){var t=e.analyticsId,n=e.blockType,a=e.knockout,r=e.node,s=e.upsellCopyOverrides;k({blockType:n,node:r,featureGateClass:".sqs-featuregate-badge",component:o.default.createElement(g.default,w({analyticsId:t,isTrial:m.default.isTrial(),knockout:a},s))})}function N(e){var t=e.blockType,n=e.node;if(O(t)){n.classList.add("sqs-feature-gated-wrapper");var a=".sqs-feature-gated-logo-container";R({blockType:t,node:n,featureGateClass:a})}}function P(e){var t=e.blockType,n=e.node,a=e.analyticsId,r=e.upsellCopyOverrides;k({blockType:t,node:n,featureGateClass:".sqs-featuregate-panel",component:o.default.createElement(b.default,w({isTrial:m.default.isTrial(),analyticsId:a},r))})}function F(e){var t=e.featureType,n=e.analyticsId;if(!d.default.isFeatureGated(t))return null;return o.default.createElement(b.default,{isTrial:m.default.isTrial(),analyticsId:n})}function x(e){var t=e.blockType,n=e.node,a=e.analyticsId,r=e.title,s=e.subTitle,i=e.upsellCopyOverrides;k({blockType:t,node:n,featureGateClass:".sqs-featuregate-message",component:o.default.createElement(_.default,w({isTrial:m.default.isTrial(),analyticsId:a,title:r,subTitle:s},i))})}function G(e){var t=e.blockType,n=e.node,a=e.analyticsId,r=e.upsellCopyOverrides,s=e.eventTracker;k({blockType:t,node:n,featureGateClass:".sqs-featuregate-upgrade-modal",component:o.default.createElement(y.default,w({isOpen:true,isTrial:m.default.isTrial(),analyticsId:a,eventTracker:s},r))})}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};G({analyticsId:"upgrade-modal",node:document.createElement("div"),upsellCopyOverrides:e,eventTracker:t})}function U(e){var t=m.default.isTrial();return{isSoftWarning:t,title:e.upgradeTitle,message:e.upgradeDescription,destination:t?c.default.TRIAL_UPGRADE_PLAN:c.default.UPGRADE_PLAN}}},"./src/main/webapp/universal/src/shared/utils/CampaignsConfigApi.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(n("./src/main/webapp/universal/src/shared/utils/network.js"));var s=a(n("./src/main/webapp/universal/packages/enums/Flag.js"));var i=a(n("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.js"));var o="/api/composer";var l="".concat(o,"/mailing-lists");var u={getLists:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;if(i.default.isFeatureEnabled(s.default.CAMPAIGNS_API_MOCK))return Promise.resolve({results:[{id:"ffffffffffffffffffffffff",name:"Mocked Campaigns API Response",count:1}],hasNextPage:false});return r.default.get(t).then(function(e){var t=e.data;return t})}};var c=u;t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/MailChimpConfigApi.js":function(e,t,n){"use strict";var a=n("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");var r="/api/external/GetMailChimpAccountDetail";var s="/api/external/GetMailChimpLists";var i=function e(t,n){var a=t.title.toLowerCase();var r=n.title.toLowerCase();if(a<r)return-1;if(a>r)return 1;return 0};var o=function e(t){var n=t.data;return Object.keys(n).filter(function(e){return""!==e}).map(function(e){return{value:e,title:n[e].title}}).sort(i)};var l={getAccountDetail:function e(t){return a.get(r,{params:{connectedAccountId:t}})},getLists:function e(t){return a.get(s,{params:{connectedAccountId:t}}).then(o)}};e.exports=l},"./src/main/webapp/universal/src/shared/utils/MailChimpConfigRecord.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var i=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/inherits.js"));var o=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=a(n("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function u(a){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(a),t;if(r()){var n=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var c=n("./common/temp/node_modules/immutable/dist/immutable.js"),d=c.Record;var m=n("./src/main/webapp/universal/src/shared/utils/MailChimpConnectionInfoRecord.js");var p=n("./src/main/webapp/universal/src/shared/utils/MailChimpOAuthConfigRecord.js");var f={mailChimpUsername:"",mailChimpUseSingleOptIn:true,isMailChimpConnected:false,mailChimpListId:"",mailChimpConnectionInfo:new m,mailChimpOAuthConfig:null};var h=function(e){(0,i.default)(l,e);var t=u(l);function l(){(0,r.default)(this,l);return t.apply(this,arguments)}(0,s.default)(l,null,[{key:"buildFromJson",value:function e(t){var n=t.mailChimpUsername,a=t.mailChimpUseSingleOptIn,r=t.isMailChimpConnected,s=t.mailChimpListId,i=t.mailChimpConnectionInfo,o=t.mailChimpOAuthConfig;return new l({mailChimpUsername:n||"",mailChimpUseSingleOptIn:!!a,isMailChimpConnected:!!r,mailChimpListId:s||"",mailChimpConnectionInfo:new m(i),mailChimpOAuthConfig:o?new p(o):null})}}]);return l}(d(f));e.exports=h},"./src/main/webapp/universal/src/shared/utils/MailChimpConnectionInfoRecord.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/immutable/dist/immutable.js"),r=a.Record;e.exports=r({mailChimpLists:[],mailChimpError:false})},"./src/main/webapp/universal/src/shared/utils/MailChimpOAuthConfigRecord.js":function(e,t,n){"use strict";var a=n("./common/temp/node_modules/immutable/dist/immutable.js"),r=a.Record;e.exports=r({externalAuthenticationId:null,oauthError:false})}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/28-a1344bef4b80c29ce646d-min.en-US.js.map