(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[25],{"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.jsx":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var a=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var i=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/inherits.js"));var u=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));function m(s){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,p.default)(s),n;if(t()){var r=(0,p.default)(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return(0,u.default)(this,n)}}var t=r("./src/main/webapp/universal/src/shared/i18n/index.ts"),d=t.t;var v=r("./common/temp/node_modules/prop-types/index.js");var f=r("./common/temp/node_modules/react/index.js");var h=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/stores/AvailablePlanPropTypes.js");var b=r("./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/index.jsx");var g=r("./common/temp/node_modules/@sqs/fields/lib/index.js"),w=g.Button;var C=r("./src/main/webapp/universal/src/shared/components/Confirmation.jsx");var P=r("./common/temp/node_modules/classnames/index.js");var y=r("./src/main/webapp/universal/src/shared/utils/billing/ProductLineUtils.js");var j=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.less");var _=r("./src/main/webapp/universal/src/apps/App/shared/components/billing/PurchasePreview/index.jsx");var S=r("./src/main/webapp/universal/src/shared/router/withRouter.tsx");var x=r("./src/main/webapp/universal/src/shared/router/propType.ts"),A=x.default;var L=r("./src/main/webapp/universal/src/apps/App/shared/actions/billing/PlanChangePreviewActions.js");var k=r("./src/main/webapp/universal/src/apps/App/shared/components/Receipt/utils/InvoicePropTypes.js");var B=r("./src/main/webapp/universal/packages/enums/SubscriptionLineItemType.js");var R=function(e){(0,l.default)(t,e);var s=m(t);function t(){var l;(0,a.default)(this,t);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];l=s.call.apply(s,[this].concat(n));(0,c.default)((0,i.default)(l),"state",{showError:false,showSpinner:false});(0,c.default)((0,i.default)(l),"handleConfirm",function(){l.setState({showSpinner:true});l.props.onConfirm().then(function(){return document.location.href="/config"},function(){return l.setState({showSpinner:false,showError:true})})});(0,c.default)((0,i.default)(l),"getPlanChangeLabel",function(e){if(e.subscriptionDetail.lineItemType!==B.PRORATED_CHARGE&&e.subscriptionDetail.lineItemType!==B.PRORATED_REFUND)return null;var n=l.props.mode;var r=e.subscriptionDetail;var s=r.productLine,t=r.planName,a=r.periodName;var o=y.getLabelForProductLine(s);var i=o;o!==t&&(i+=" "+t);"billingPeriod"===n&&(i+=" - "+a);return i});(0,c.default)((0,i.default)(l),"getButtonLabel",function(){if("billingPeriod"===l.props.mode)return d("Confirm Cycle Change");return d("Confirm Plan Change")});(0,c.default)((0,i.default)(l),"getSpinnerLabel",function(){var e=l.props.mode;if("billingPeriod"===e)return d("Please wait a moment while your Squarespace billing cycle is changed…");return d("Please wait a moment while your Squarespace plan is changed…")});(0,c.default)((0,i.default)(l),"renderModals",function(){var e=l.state,n=e.showSpinner,r=e.showError;return f.createElement("div",null,f.createElement(b,{visible:n,subtext:l.getSpinnerLabel()}),f.createElement(C,{isOpen:r,onCancel:function e(){return l.setState({showError:false})},onConfirm:function e(){return l.props.router.push("/settings/billing/billing/payment-info")},title:d("Transaction Declined"),message:d("The transaction was declined. Please update your payment information and try again."),confirmText:d("Update Payment Info"),cancelText:d("Dismiss")}))});return l}(0,o.default)(t,[{key:"componentDidMount",value:function e(){L.emptyCache()}},{key:"render",value:function e(){var n=this.props,r=n.isVisible,s=n.previewInvoice,t=n.width;if(!r)return this.renderModals();return f.createElement("div",{className:P(j.container,(0,c.default)({},j.hidden,!r)),styles:{width:t}},f.createElement("div",{className:j.column},f.createElement("div",{className:j.subSummaryContainer},f.createElement(_,{previewInvoice:s,itemDescriptionOverride:this.getPlanChangeLabel}))),this.props.showConfirm&&f.createElement("div",{className:j.column},f.createElement("div",{className:j.confirmButtonContainer},f.createElement(w,{testId:"submit-plan-change-button",className:j.confirmButton,type:"primary",onClick:this.handleConfirm},this.getButtonLabel()))),this.renderModals())}}]);return t}(f.Component);(0,c.default)(R,"propTypes",{mode:v.oneOf(["billingPeriod","featureLevel"]),isVisible:v.bool,newPlan:h.plan,previewInvoice:k.invoice,onConfirm:v.func.isRequired,showConfirm:v.bool,width:v.number,router:A});(0,c.default)(R,"defaultProps",{onConfirm:function e(){false;return Promise.resolve()},showConfirm:true});e.exports=S(R)},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.less":function(e,n,r){e.exports={container:"PlanChangeFooter-container-9F6wa",column:"PlanChangeFooter-column-3lcKt",confirmButtonContainer:"PlanChangeFooter-confirmButtonContainer-1PWdG",subSummaryContainer:"PlanChangeFooter-subSummaryContainer-7zdkX",confirmButton:"PlanChangeFooter-confirmButton-3H0hd"}},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/index.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var d=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/utils/setBillingChangeCookie.js");var t=r("./src/main/webapp/universal/src/apps/App/shared/stores/billing/AvailablePlansStore.js");var a=r("./src/main/webapp/universal/src/shared/actions/billing/CustomerActions.js");var v=r("./src/main/webapp/universal/src/shared/stores/billing/CustomerStore.js");var f=r("./src/main/webapp/universal/src/apps/App/shared/stores/billing/PlanChangePreviewStore.js");var h=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/stores/PlanSelectionStore.js");var b=r("./src/main/webapp/universal/src/apps/App/shared/actions/billing/SubscriptionActions.js");var g=r("./src/main/webapp/universal/src/apps/App/shared/stores/billing/SubscriptionStore.js");var o=r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js");var i=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.jsx");var w=r("./src/main/webapp/universal/src/apps/App/shared/actions/ProductLineTransitionActions.js");e.exports=s({getStores:function e(){return[t,v,f,h,o]},getPropsFromStores:function e(n){var r=v.getState(),s=r.cardNumber,t=r.customerBalance;var a=h.getState().plan;var o=f.getState(),i=o.invoice,l=o.isLoaded,u=o.isLoading;var p=a?a.id:null;var c=!("isVisible"in n&&!n.isVisible)&&null!==p&&l&&!u;var m=function e(){return g.getOrLoadWebsiteSubscription().then(function(e){var n=Object.assign({},e);Object.assign(e,{plan:a});var r=null;r=n.plan.productLine!==a.productLine?w.transition(a.productLine,{subscriptionId:e.id,featureLevel:a.featureLevel}):b.update(e);return r.then(function(){var e=g.getWebsiteSubscription();d(n,e)})})};return{cardNumber:s,customerBalance:t,isVisible:c,newPlan:a,onConfirm:m,previewInvoice:i}},componentDidConnect:function e(){var n=v.getState();n.loaded||n.loading||a.load.defer()}},i)},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.jsx":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var t=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var a=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var o=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/inherits.js"));var i=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function u(s){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(s),n;if(t()){var r=(0,l.default)(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return(0,i.default)(this,n)}}var p=r("./common/temp/node_modules/react/index.js");var c=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.less");var m=function(e){(0,o.default)(r,e);var n=u(r);function r(){(0,t.default)(this,r);return n.apply(this,arguments)}(0,a.default)(r,[{key:"render",value:function e(){return p.createElement("div",{className:c.container},this.props.children)}}]);return r}(p.Component);e.exports=m},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.less":function(e,n,r){e.exports={container:"PromotionalBanner-container-1W4H-"}},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/index.js":function(e,n,r){"use strict";e.exports=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.jsx")},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/utils/setBillingChangeCookie.js":function(e,n,r){"use strict";var s=function e(n,r){var s=n.plan;var t=r.plan;var a={newSub:false,planChange:s.featureLevel!==t.featureLevel,prevPlanName:s.planDisplayName,newPlanName:t.planDisplayName,prevPeriodName:s.periodDisplayName,newPeriodName:t.periodDisplayName,nextBillDate:r.renewalDate,productLineChange:s.productLine!==t.productLine,prevProductLine:s.productLine,newProductLine:t.productLine};document.cookie="billingChangeSummary=".concat(JSON.stringify(a))};e.exports=s},"./src/main/webapp/universal/src/apps/App/shared/actions/ProductLineTransitionActions.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var t=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var a=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var o=r("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var i=r("./src/main/webapp/universal/src/apps/App/shared/utils/ProductLineTransitionAPI.js");var l=function(){function e(){(0,t.default)(this,e);this.generateActions("loadSuccess","loadFail")}(0,a.default)(e,[{key:"transition",value:function e(n,r){var s=this;r&&0!==Object.keys(r).length||(r={});var t=i.transition(n,r);t.then(function(e){s.loadSuccess(e.data.results)}).catch(function(e){console.error(e);s.loadFail(e)});return t}}]);return e}();e.exports=o.createActions(l)},"./src/main/webapp/universal/src/apps/App/shared/actions/billing/PlanChangePreviewActions.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var t=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var a=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var o=r("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var i=r("./src/main/webapp/universal/src/apps/App/shared/utils/billing/PlanChangePreviewApi.js");var l={};var u=function(){function e(){(0,t.default)(this,e);this.generateActions("loadSuccess","loadFail","reset")}(0,a.default)(e,[{key:"load",value:function e(r,s){var t=this;return function(e){e({planId:r});var n=null;n=l[r]?Promise.resolve(l[r]):i.load({planId:r,productType:s});return n.then(function(e){l[r]||(l[r]=e);t.loadSuccess(Object.assign({planId:r},e.data))}).catch(function(e){console.error(e);t.loadFail()})}}},{key:"emptyCache",value:function e(){return function(e){l={}}}}]);return e}();e.exports=o.createActions(u)},"./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/BigSpinner.less":function(e,n,r){e.exports={spinner:"BigSpinner-spinner-3UKwJ animations-spin-lL8XX",subtext:"BigSpinner-subtext-3hZZJ",overlay:"BigSpinner-overlay-1nwS8",overlayContainer:"BigSpinner-overlayContainer-ceHMj"}},"./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/index.jsx":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var o=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var l=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var u=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/inherits.js"));var a=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/defineProperty.js"));function m(s){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,p.default)(s),n;if(t()){var r=(0,p.default)(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);return(0,a.default)(this,n)}}var t=r("./common/temp/node_modules/prop-types/index.js");var d=r("./common/temp/node_modules/react/index.js");var v=r("./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/BigSpinner.less");var f=r("./src/main/webapp/universal/src/shared/components/Modal/index.jsx");var h=function(e){(0,u.default)(a,e);var t=m(a);function a(){var n;(0,o.default)(this,a);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];n=t.call.apply(t,[this].concat(r));(0,c.default)((0,l.default)(n),"renderSubtext",function(){var e=n.props.subtext;if(e)return d.createElement("div",{className:v.subtext},e);return""});return n}(0,i.default)(a,[{key:"render",value:function e(){return d.createElement(f,{isOpen:this.props.visible,overlayClassName:v.overlay,className:v.overlayContainer,width:"auto"},d.createElement("div",{className:v.spinner}," "),this.renderSubtext())}}]);return a}(d.Component);(0,c.default)(h,"propTypes",{visible:t.bool,subtext:t.string});(0,c.default)(h,"defaultProps",{subtext:"",visible:false});e.exports=h},"./src/main/webapp/universal/src/apps/App/shared/stores/billing/PlanChangePreviewStore.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var t=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/classCallCheck.js"));var a=s(r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@babel/runtime/helpers/createClass.js"));var o=r("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var i=r("./src/main/webapp/universal/src/apps/App/shared/actions/billing/PlanChangePreviewActions.js");var l=function(){function e(){(0,t.default)(this,e);this.isLoaded=false;this.isLoading=false;this.amount=null;this.violations=[];this.planId=null;this.bindActions(i)}(0,a.default)(e,[{key:"onLoad",value:function e(n){var r=n.planId;this.setState({isLoading:true,planId:r})}},{key:"onLoadSuccess",value:function e(n){if(n.planId!==this.planId)return false;this.setState({isLoaded:true,isLoading:false,invoice:n.invoice})}},{key:"onLoadFail",value:function e(){this.setState({isLoading:false})}},{key:"onReset",value:function e(){this.setState({amount:null,isLoading:false,invoice:null})}}]);return e}();e.exports=o.createStore(l,"PlanChangePreviewStore")},"./src/main/webapp/universal/src/apps/App/shared/utils/ProductLineTransitionAPI.js":function(e,n,r){"use strict";var s=r("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");var t="/api/billing/product-types/website/product-lines";var a={transition:function e(n,r){return s.post("".concat(t,"/").concat(n,"/transitions"),r)}};e.exports=a},"./src/main/webapp/universal/src/apps/App/shared/utils/billing/PlanChangePreviewApi.js":function(e,n,r){"use strict";var s=r("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");var t=r("./src/main/webapp/universal/src/shared/utils/SerializationUtils.js"),a=t.deserializer;var o=r("./src/main/webapp/universal/src/shared/utils/billing/deserializeInvoice.js");var i="/api/billing/plan-change-preview";var l=a(o,"data.invoice");var u={load:function e(n){return s.get(i,{params:n}).then(l)}};e.exports=u},"./src/main/webapp/universal/src/shared/utils/billing/PriceUtils.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/lodash/find.js");var t=r("./src/main/webapp/universal/src/shared/utils/billing/BillingIntervalUtils.js");function a(e){return s(e,function(e){return t.isAnnual(e.billingPeriod)})}function o(e){return s(e,function(e){return t.isMonthly(e.billingPeriod)})}function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{code:"USD",symbol:"$"};false;if(!e&&0!==e)return"";var r=Math.round(e)!==e?2:0;var s=Math.abs(e)!==e?"-":"";var t="USD"===n.code?"":" "+n.code;e=Number(Math.abs(e)).toFixed(r);return s+n.symbol+e+t}e.exports={findAnnualPrice:a,formatPrice:i,findMonthlyPrice:o}}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/25-6ad3a553c72a757b51680-min.en-US.js.map